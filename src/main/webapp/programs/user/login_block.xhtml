<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <ui:composition>
        <h:panelGroup id="loginbox-container" layout="block">
            <p:dialog id="modalDialog" widgetVar="loginbox" header="#{bootstrap.programUserLogin.loginboxTitle}" modal="true" 
                      height="200" width="500"
                      style="" closable="false">  
                <h:form id="login-form">
                    <p:panelGrid id="login-form-table" columns="2">
                        <f:facet name="header">
                            <p:messages id="login-form-messages" showDetail="false" autoUpdate="true"
                                        for="login-form"/>
                        </f:facet>
                        <p:outputLabel value="Username: " />
                        <p:inputText value="#{bootstrap.programUserLogin.username}" />
                        
                        <p:outputLabel value="Password: " />
                        <p:password value="#{bootstrap.programUserLogin.password}" />
                    </p:panelGrid>
                    
                    
                    <p:commandButton value="Log in" actionListener="#{bootstrap.programUserLogin.login()}" 
                                     update=":loginbox-container" />
                </h:form>
            </p:dialog>
            <script type="text/javascript">
               $(document).ready(function() {
                   if (typeof (Storage) != "undefined")
                   {
                       var session = '#{session.getAttribute("user")}';
                       if(session == null || !session){
                           PF('loginbox').show();
                       } else {
                           PF('loginbox').hide();
                       }
                    }
                    else
                    {
                        document.getElementById("header").innerHTML = "<br/>Sorry, your browser does not support Web Storage...";
                    }
                });
            </script>
        </h:panelGroup>
    </ui:composition>
</html>
